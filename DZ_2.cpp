#include <iostream>
#include <fstream>
#include <string>
#include <vector>

using namespace std;

class Контакт 
{
private:
    string имя;
    string домашнийТелефон;
    string рабочийТелефон;
    string мобильныйТелефон;
    string дополнительнаяИнформация;

public:
    Контакт(string имя, string домашнийТелефон, string рабочийТелефон, string мобильныйТелефон, string дополнительнаяИнформация) 
    {
        this->имя = имя;
        this->домашнийТелефон = домашнийТелефон;
        this->рабочийТелефон = рабочийТелефон;
        this->мобильныйТелефон = мобильныйТелефон;
        this->дополнительнаяИнформация = дополнительнаяИнформация;
    }

    string получитьИмя() 
    {
        return имя;
    }

    string получитьДомашнийТелефон() 
    {
        return домашнийТелефон;
    }

    string получитьРабочийТелефон() 
    {
        return рабочийТелефон;
    }

    string получитьМобильныйТелефон() 
    {
        return мобильныйТелефон;
    }

    string получитьДополнительнуюИнформацию() 
    {
        return дополнительнаяИнформация;
    }
};

class ТелефоннаяКнига 
{
private:
    vector<Контакт> контакты;

public:
    void добавитьКонтакт(Контакт контакт) 
    {
        контакты.push_back(контакт);
    }

    void показатьВсеКонтакты() 
    {
        for (Контакт контакт : контакты) 
        {
            cout << контакт.получитьИмя() << ',' << контакт.получитьДомашнийТелефон() << ','
                << контакт.получитьРабочийТелефон() << ',' << контакт.получитьМобильныйТелефон() << ','
                << контакт.получитьДополнительнуюИнформацию() << '\n';
        }
    }

    void экспортВCsv() 
    {
        //Замените <ваше_имя_пользователя> на свое имя пользователя в системе Windows
        ofstream файл("C:/Users/<ваше_имя_пользователя>/Documents/телефонная_книга.csv"); 
        if (файл.is_open()) 
        {
            for (Контакт контакт : контакты) 
            {
                файл << контакт.получитьИмя() << ',' << контакт.получитьДомашнийТелефон() << ','
                    << контакт.получитьРабочийТелефон() << ',' << контакт.получитьМобильныйТелефон() << ','
                    << контакт.получитьДополнительнуюИнформацию() << '\n';
            }
            файл.close();
            cout << "Данные успешно экспортированы в телефонная_книга.csv." << endl;
        }
        else 
        {
            cerr << "Не удалось открыть файл для экспорта." << endl;
        }
    }

    void добавитьКонтактЧерезКоманднуюСтроку() 
    {
        string данные;
        cout << "Введите данные в формате 'Имя,Домашний Телефон,Рабочий Телефон,Мобильный Телефон,Дополнительная Информация': ";
        cin.ignore(); // очистка буфера ввода
        getline(cin, данные);

        size_t позиция = данные.find(',');
        string имя = данные.substr(0, позиция);
        данные.erase(0, позиция + 1);

        позиция = данные.find(',');
        string домашнийТелефон = данные.substr(0, позиция);
        данные.erase(0, позиция + 1);

        позиция = данные.find(',');
        string рабочийТелефон = данные.substr(0, позиция);
        данные.erase(0, позиция + 1);

        позиция = данные.find(',');
        string мобильныйТелефон = данные.substr(0, позиция);
        данные.erase(0, позиция + 1);

        string дополнительнаяИнформация = данные;

        Контакт новыйКонтакт(имя, домашнийТелефон, рабочийТелефон, мобильныйТелефон, дополнительнаяИнформация);
        добавитьКонтакт(новыйКонтакт);
    }
};

int main() 
{
    setlocale(LC_ALL, "Russian");
    ТелефоннаяКнига телефоннаяКнига;

    Контакт контакт1("Иван Иванов", "123456789", "987654321", "555444333", "Друг");
    Контакт контакт2("Мария Петрова", "987654321", "123456789", "666777888", "Коллега");

    телефоннаяКнига.добавитьКонтакт(контакт1);
    телефоннаяКнига.добавитьКонтакт(контакт2);

    телефоннаяКнига.показатьВсеКонтакты();
    телефоннаяКнига.экспортВCsv();

    cout << "Выберите действие:" << endl;
    cout << "1. Добавить контакт" << endl;
    cout << "2. Показать все контакты" << endl;

    int выбор;
    cin >> выбор;

    if (выбор == 1) 
    {
        телефоннаяКнига.добавитьКонтактЧерезКоманднуюСтроку();
        телефоннаяКнига.экспортВCsv(); // Запись нового контакта в файл после ввода
    }
    else if (выбор == 2) 
    {
        телефоннаяКнига.показатьВсеКонтакты();
    }
    else 
    {
        cout << "Неверный выбор." << endl;
    }

    return 0;
}
